https://juejin.cn/post/6917816624040902670#heading-43
https://juejin.cn/post/6844903945530245133
https://juejin.cn/post/6921886428158754829
https://juejin.cn/post/6844904079206924295
https://juejin.cn/post/7004638318843412493?utm_source=gold_browser_extension#heading-21
https://juejin.cn/post/6961222829979697165
https://juejin.cn/post/6947860760840110088#heading-14
https://github.com/KieSun/fucking-frontend/issues/30
https://juejin.cn/post/6989422484722286600#heading-21
https://zhuanlan.zhihu.com/p/42703705
https://www.v2ex.com/t/718161
https://www.36kr.com/p/1722667122689
https://www.zhihu.com/question/309800136
https://juejin.cn/post/6930595674371457037#heading-5

## 20210928

嵌入式金融开放平台授权管理优化：调研 Transfer 组件穿梭框双向绑定 Tree 组件作为自定义渲染列表；

## 20210927

嵌入式金融开放平台：1.调试构建工具，优化Typescript配置项；2.Vite构建失败，原因是vue-tsc检查报错，调试node_modules；

## 20210926

嵌入式金融开放平台构建工具优化：1.添加 ESLint / Prettier 插件，规范编码风格；2.完善 Typescript 静态校验规则，减少代码检查冲突；

## 20210924

嵌入式金融开放平台帮助中心需求分析和前端程序交互设计，计划于9/30日需求评审；

## 20210923

嵌入式金融开放平台授权管理优化：1.优化授权局部组件更新动画，提高用户体验；2. 调整授权侧边栏样式；

## 20210918

嵌入式金融开放平台授权管理优化：1.权限列表逻辑聚合，减少组件依赖；2.使用循环简化template代码冗长，提高代码可读性；

## 20210917

1.优化沙盒页面局部更新逻辑，增强视觉交互效果；2.review 沙盒页面各组件逻辑补充关键注释；

## 20210916

1.重写沙盒侧边栏，解决点击区域较小的问题；2.优化沙盒页面加载动画效果，提高用户交互体验；3.修复代码评审内容；4.0916前端生产发布验证；

## 20210915

1.沙盒输入项排序，需要后端提供排序字段，该项交由后续版本支持；2.新增沙盒输入项字段类型显示，减少无效操作；3.前端代码评审，包含嵌入式金融开放平台和智能运营平台

## 20210914

1.修复沙盒视图当输入内容较多时，侧边栏位置显示太高，不方便操作的问题；2.0916版本前端发布工作准备；

## 20210913

预研Antdesign布局组件，调试侧边栏和内容区域的滚动轴，优化嵌入式金融开放平台页面交互；下午调休；

## 20210910

使用hooks优化沙盒主页面和详情页，将页面模板与功能逻辑分离，提升逻辑关注点；

## 20210909

使用hooks优化沙盒动态表单，拆分渲染模板和功能逻辑，提升逻辑关注点；

## 20210908

1.排查沙盒接口传参错误的问题，原因是组件未释放局部变量，导致上一次的值带入后续调用，需要手动清空局部变量；2. review 沙盒代码，优化逻辑和补充关键注释；

## 20210907

1.嵌入式金融开放平台前端添加字符串转换JSON对象的功能；2.调研async-validator用法，优化沙盒输入校验；

## 20210906

编写嵌入式金融帮助中心产品设计文档，包含功能流程和页面交互；

## 20210903

1.Loginbox 组件使用hooks完成代码优化；2.CND技术方案评审；3.嵌入式金融帮助中心需求讨论：桂清清，陈亮，龚毓麒，侯枫

## 20210902

1.review 公共组件代码，尝试使用hooks优化，抽取逻辑代码；2.嵌入式金融平台前端0902版本发布；

## 20210901

review 授权和沙盒代码模块，优化部分any类型的对象，方便类型推断，降低逻辑复杂度；

## 20210831

1.梳理和补充嵌入式金融前端项目中 typescript 的类型定义和文档注释； 2.嵌入式金融平台前端0902版本代码评审

## 20210830

1.嵌入式金融开放平台前端0902版本生产发布沟通和相关准备工作；2. 嵌入式金融开放平台前端0902版本提测沟通；3. 优化网络超时；

## 20210827

嵌入式金融开放平台前端开发工作：1. 修复因授权管理产品ID重复时，引发的交互错误；2. review 授权管理操作按钮相关的逻辑代码；

## 20210826

嵌入式金融开放平台前端开发工作：1. antdv 组件按需加载，拆分组件大小，减少单个体积；2. 优化项目构建速度，生产构建删除调试代码；3. 增加 visualizer 组件，能可视化分析构建后包大小及详细数据；

## 20210825

嵌入式金融开放平台前端开发工作：1. 优化授权管理重置逻辑，充分利用 antd 内置功能，简化代码；2. 使用 store 重写授权按钮操作逻辑，降低组件之间的逻辑耦合；

## 20210824

嵌入式金融开放平台前端开发工作：1.antd穿梭框Transfer对tsx缺乏文档支持，改为template方式实现；2. 调研antd框架中，穿梭框Transfer的tsx相关资料；

## 20210823

嵌入式金融开放平台前端开发工作：拆分普通用户权限列表组件，优化业务逻辑，使用tsx改造组件模版，提高组件代码逻辑可读性；

## 20210820

嵌入式金融开放平台前端开发工作：普通用户权限列表穿梭框Transfer调试，梳理管理员操作逻辑；

## 20210819

嵌入式金融开放平台前端开发工作：重构授权管理，使用tsx改造权限列表选择框和操作按钮逻辑，进一步拆分组件和封装逻辑；

## 20210818

嵌入式金融开放平台前端开发工作：1.重构授权管理，使用tsx改造用户名搜索框和授权类型选择器；2.项目构建工具改造，支持alias优化资源引用路径；

## 20210817

嵌入式金融开放平台前端开发工作：1.修复文档空间数据请求方法，涉及增删改；2.重构授权管理，预研 Vue3.0 + tsx 相关技术；

## 20210816

嵌入式金融开放平台前端开发工作：1.网络超时优化，当发生请求超时，客户端会发起一次请求重试；2.重构授权管理，组件逻辑拆分；

## 20210813

嵌入式金融开放平台前端开发工作：1.容器机房迁移，申请管理权限和修改容器配置；2.优化授权管理；

## 20210812

嵌入式金融开放平台前端开发工作：1.优化授权管理，解决因产品ID重复，影响多个产品的错误交互；2.优化数据请求超时异常处理；

## 20210811

嵌入式金融开放平台前端开发工作：1.antd 动态按需加载调研；2. 优化账户管理和空间文档接口处理逻辑，简化错误异常流程；

## 20210810

嵌入式金融开放平台前端开发工作：优化request方法，统一处理网络异常和接口错误类型，降低view层逻辑处理复杂度；统一处理response返回结果，减少view层翻译业务错误码逻辑；

## 20210809

嵌入式金融开放平台前端开发工作：1. 优化退出逻辑，重写store及相关方法；2.全局组件优化，使用async/await，减少逻辑复杂度；

## 20210806

嵌入式金融开放平台前端开发工作：1. token逻辑优化，减少因token失效引发的流程异常，提高用户使用体验；2. 优化数据请求方法，减少逻辑复杂度，降低代码维护成本；

## 20210805

嵌入式金融开放平台前端开发工作：1. 优化重置密码输入校验规则，数据请求采用async/await；2.配合UI走查，优化用户体验；3.由于 antd 按需加载不兼容vite-plugin-style-import插件,antd 回滚至2.2.0-
beta.3版本

嵌入式金融开放平台0805发布上线，完善UI交互问题；

## 20210804

嵌入式金融开放平台前端开发工作：1. 重构沙盒逻辑；2.优化用户管理输入校验规则，数据请求采用async/await；3.配合UI走查，优化用户体验；

## 20210803

嵌入式金融开放平台前端开发工作：1. 修复沙盒动态表单校验交互；2.优化授权管理表单校验逻辑；

## 20210802

嵌入式金融开放平台前端开发工作：1. review 授权管理和沙盒代码，调试表单列表；

## 20210730

嵌入式金融开放平台前端开发工作：1. 优化highlight按需加载，删除冗余文件；2. ant-design-vue 版本升级，支持useForm，调试输入校验；2.沙盒UI样式调整；

## 20210729

嵌入式金融开放平台前端开发工作：1.修复在线沙盒和文档空间代码高亮；2.沙盒和文档空间局部样式调整；

## 20210728

嵌入式金融开放平台前端开发工作：1.Anchor 组件调试；2.review 文档空间代码，比对UI走查内容；

## 20210727

《Git 实践》完成，计划2021/08/04分享；

信用树&智能运营平台前端代码评审

## 20210726

编写《Git Flow 项目分支管理经验分享》 1. 构建分支时序图； 2. 资料收集和内容整理；

## 20210723

休假

## 20210722

嵌入式金融开放平台0722发布上线，解决页面UI交互问题；

编写《Git Flow 项目分支管理经验分享》

信用分2.1前端代码评审

## 20210721

嵌入式金融开放平台前端开发工作：1.文档空间UI走查；2.添加页面title信息，统一在路由中管理；3.添加prettier，管理代码风格；

## 20210720

嵌入式金融开放平台前端开发工作：1.修复账户管理UI样式；2.修复输入框交互效果；

## 20210719

嵌入式金融开放平台前端开发工作：1.修复首页，帮助页，账户管理UI样式；2.优化服务端错误信息话术；

## 20210716

嵌入式金融开放平台前端开发工作：1.修复沙盒UI交互走查问题；2.嵌入式金融开放平台复盘总结；3.嵌入式金融开放平台待优化内容；

## 20210715

嵌入式金融开放平台前端开发工作：1.修复管理员授权功能；2.添加返回顶部按钮，调整沙盒UI体验；3.修复空间文档页面跳转问题；

嵌入式金融开放平台0715发布上线；

## 20210714

嵌入式金融开放平台前端开发工作：1.修复沙盒测试bug；2.整体代码review，解决typescript和编码风格；

嵌入式金融开放平台0715版本代码评审；

## 20210713

嵌入式金融开放平台前端开发工作：1. 沙盒debug接口联调，页面功能基本完成；2. 文档产品页添加沙盒字段编辑；3.沙盒UI样式调整；

嵌入式金融开放平台0715版本提测；

## 20210712

嵌入式金融开放平台前端开发工作：1. 文档产品页面调整沙盒入口逻辑；2. 沙盒API详情接口联调完成；

## 20210710

嵌入式金融开放平台前端开发工作：1. 沙盒侧边栏接口联调，页面布局和组件调整；

## 20210709

嵌入式金融开放平台前端开发工作：1. 沙盒静态页面开发完成；2.UI交互样式修改；

## 20210708

嵌入式金融开放平台前端开发工作：1. 修复普通用户授权功能；2. 添加超级管理员和已禁用用户的限制；

嵌入式金融开放平台0708发布上线

## 20210707

嵌入式金融开放平台前端开发工作：1. 完善空间/产品/API等模块错误提示和服务端业务异常处理；2. 新增产品添加和删除接口，重写授权管理取消功能；

## 20210706

嵌入式金融开放平台前端开发工作：1. 完善重置密码前端校验；2. 修复授权管理若干bug，主要解决普通用户授权；

## 20210705

嵌入式金融开放平台前端开发工作：1. 添加用户权限信息查询接口，重写授权管理；2. 完善用户管理前端校验；

## 20210702

嵌入式金融开放平台前端开发工作：1. 修复首页、帮助页UI样式；2.评估沙盒开发设计，新增侧边栏和API参数接口；3.评估授权管理功能，新增权限接口；

以上新增接口，涉及的字段和逻辑均已与后端（王翔宇）确认。

嵌入式金融开放平台未来还有2个迭代版本：

0708：修复目前已知功能缺陷和UI样式不一致等bug；修复授权管理若干bug，并新增权限接口逻辑；

0715：完成沙盒功能；

## 20210701

嵌入式金融开放平台前端开发工作：1. 修复当角色为管理员和普通用户时，页面功能不能正常使用的问题；2.修复第三方组件引起的typescript报错；

嵌入式金融开放平台已发布上线，后面还有一个迭代，用来修复交互视觉和实现沙盒功能；

## 20210630

嵌入式金融开放平台前端开发工作：1. 修复授权管理模块，交互样式问题；2. 解决因未按需引入组件而导致的样式不正确问题；

项目整体测试进度70%，待验证bug10个左右，明天对外发布上线；

## 20210629

嵌入式金融开放平台前端开发工作：1. 授权产品提交测试；2.完善授权管理的交互样式和修复测试提出的bug；

## 20210628

嵌入式金融开放平台前端开发工作：1. 授权产品权限接口联调；2.超级管理员和空间授权提交测试；3.添加沙盒入口；

## 20210626

嵌入式金融开放平台前端开发工作：1. 授权超级管理员权限接口联调；2.授权空间权限接口联调；3. 用户信息查询和模糊查询接口联调；

## 20210625

嵌入式金融开放平台前端工程上午提测。

嵌入式金融开放平台前端开发工作：1. 授权管理功能联调接口；2. 修改布局样式，解决高度自适应；3. 补充未定义错误类型，统一处理全局类型错误；

## 20210624

嵌入式金融开放平台前端工作：1. 修改接口异常处理逻辑；2. 修复menu显示逻辑；3.修改permission和token，解决页面刷新显示问题；

## 20210623

嵌入式金融开放平台前端工作：  1. 启用/禁用账户接口联调完成；2.新增路由权限，联合token判断用户登录态；3. 授权管理前台界面完成；4.重置密码接口联调完成

## 20210622

嵌入式金融开放平台前端工作：1. 使用 baseLayout 重构首页，帮助页，工作台页面布局 ；2.创建用户功能接口联调完成；3. 添加 modifyVars，统一全局样式风格；

测试沟通：

1. 本地开发自测沙盒准入接口，验证通过后再提测；
2. 嵌入式金融开放平台，分两次提测：25号（首页、工作台、文档中心）、29号（沙盒、公共文档）
3. 沙盒涉及的34个接口测试时间和计划，参考提测质量会重新评估；

风险：

1. 上线时间可能会受影响，测试需要重新评估34个接口的时间；
2. 前端开发进度紧张，但仍争取按照本次的提测时间完成；

## 20210621

嵌入式金融开放平台前端工作：1. 用户模块接口联调；2. 封装axios模块，处理接口公共异常和错误逻辑；

测试沟通：

1. 沙盒一共有34个接口需要在上线前测试；
2. 实际提测时间（0611）与计划提测时间（0625）落后了2周，但不影响测试计划；
3. 测试完成后，需要UI交互走查页面，检查页面还原度和交互流程；

以上内容已同测试和后端沟通，上线时间未有改变，仍可以安装原定计划上线。

备注：测试期间，不单单这个项目，而是同时测试好几个项目。因此，0611提测的时间有一定富余，0625提测也不会影响项目质量。但这次加上UI交互页面走查，所以上线时间还是比较紧张。

## 20210619

嵌入式金融开放平台前端工作：1. 更新 Vue 和 ant-design-vue 版本，解决框架自身bug；2. 组件按需加载，减少构建后的静态资源体积；

## 20210618

嵌入式金融开放平台前端工作：1.添加本地代理远程接口的功能，以满足本地开发调试；2. 使用动态template配置nginx，配合容器参数，可在不修改镜像文件的情况下适配多个环境；

## 20210617

嵌入式金融开放平台前端工作：1.解决 docker 容器部署；2.通过nginx代理解决前端跨域；

## 20210616

嵌入式金融开放平台前端工作：编写 Dockerfile 构建项目镜像，前端容器构建的资料不全且涉及运维技术，待后续继续研究；

Lego 代码评审：古华、罗天真、龚毓麒

## 20210615

嵌入式金融开放平台前端工作：前端静态资源不允许使用CDN发布，需要申请 docker 容器部署，联系运维和测试协助容器部署发布；

## 20210611

嵌入式金融开放平台前端工作： 1. 使用Vuex重构组件状态；2.实现页面多极路由嵌套； 3.申请前端测试环境部署发布资源；

## 20210610

嵌入式金融开放平台前端工作： 1. 首页接口实现；2.修改项目工程构建，并配置本地数据 Mock 支持；3.用户管理、密码管理接口实现；

## 20210609

嵌入式金融开放平台前端工作： 1. 首页登陆组件，并完成接口逻辑；2.编写帮助页静态模板；3.重构工作台部分组件和代码结构；

## 20210608

嵌入式金融开放平台前端工作： 1. 编写首页静态模板；2. 配置 CSS Module 构建支持；3. 改造工作台模板，采取动态路由配置；

## 20210607

嵌入式金融开放平台前端工作： 1. 编写工作台页面侧边栏配置；2. 使用动态组件加载工作台页面；

信用分2.0代码评审

## 20210605

嵌入式金融开放平台前端工作： 1. 使用Vuex重构页面路由逻辑； 2. 后台接口配置；

## 20210604

嵌入式金融开放平台前端工作： 1. 用户管理开发； 2. 密码管理开发；

## 20210603

嵌入式金融开放平台前端工作： 1. 工作台页面开发； 2. 项目工程配置，包括开发配置，工具应用等

嵌入式金融开放平台交互设计沟通：王翔宇、龚毓麒、冯早、沈伊秋

## 20210602

嵌入式开放平台产品原型修改： 1、文档页面

前端项目工程搭建，引入Vue 3.0全家桶，包括前端存储、路由等；

嵌入式金融开放平台前后端开发设计评审：王翔宇、龚毓麒、桂清清

## 20210601

嵌入式开放平台产品原型修改： 1. 补充功能流程图； 2. 完善首页和帮助文档文案； 3. 修改登陆模块用户交互；

嵌入式金融开放平台UI设计第三次评审

## 20210531

嵌入式开放平台产品原型修改： 1. 授权管理交互； 2. 文档模块，各类场景； 3. 公共文档模块，样式补充；

嵌入式金融开放平台UI设计第二次评审

## 20210528

嵌入式开放平台：1.产品原型设计；2.产品需求与UI设计讨论；

嵌入式金融开放平台UI设计评审

## 20210527

嵌入式开放平台：1.页面与UI设计沟通确认；2.前端工程搭建；

信用树前端代码评审

## 20210526

嵌入式开放平台：1.权限管理和授权管理前后端逻辑沟通确认；2.添加查询授权信息接口；

前端面试，候选人：孙寅

## 20210525

嵌入式开放平台：1.页面交互流程设计；2.前后端页面交互讨论；

嵌入式开放平台前端架构评审

## 20210524

嵌入式开放平台：1.前后端页面原型分析与沟通；2.页面原型初稿设计与修改；3.前端代码仓库申请；

前端面试，候选人：潘伟

## 20210521

借条开放平台：1.前后端功能模块划分；2.页面流程详细设计；

借条开放平台后端架构评审

## 20210520

借条开放平台：1.前后端API接口评估；2.前后端功能流程评估；

## 20210519

借条开放平台： 1. 前端技术框架选型（Vue 3.0）； 2. 前端页面详细设计，包括功能流程和组件划分；

Vue3.0 & Vite 练习 Demo。

## 20210518

借条开放平台： 1. 需求沟通 2. 技术评估 3. 开发设计

Vue3.0 & Vite 学习： 1. composition api 2. 向前语法兼容

## 20210517

Lego Nuxt 迁移和代码优化总结

Nuxt & typescript 学习： 1. typescript 2. 装饰器使用 3. ESlint 配置

## 20210514

Nuxt 模版调研，希望通过优化Lego-nuxt中模板代码，提高样式模板的易读性和可维护性。

## 20210513

Lego-nuxt 0513版本发布

Lego-nuxt 代码评审

Vue 代码风格指南研究，期望能优化代码评审内容和提高评审效率。

## 20210512

review 氛围和券包组件

优化图文导航和商品组件代码：

1. 移除冗余jQuery代码
2. 优化代码组织结构
3. 优化文件上传下载方法
4. 组件数据遍历赋值，提高代码可维护性

## 20210511

优化电梯和商品组件代码：

1. 优化代码组织结构
2. 动静态样式分离
3. 移除冗余jQuery代码
4. 优化接口请求方法，改为 async / await

## 20210510

优化电梯组件代码：

1. 优化业务代码逻辑
2. 动静态样式分离
3. 优化事件处理逻辑

## 20210430

Nuxt 内置方法和生命周期调研，优化SSR过程中钩子函数的执行顺序和页面加载逻辑，提高页面响应速度。

## 20210429

电梯组件支持SSR：

1. 优化埋点方法
2. 优化获取图片URL的逻辑

## 20210428

商品组件支持SSR：

1. 优化代码逻辑
2. 优化埋点方法

## 20210427

- 图文导航组件 修改 cdn 方法
- markdown 研究
- 代码评审

## 20210426

- Lego-nuxt 代码评审
- markdown 研究，期望可以通过md文件自动生成文档

## 20210425

- refactor ElevatorEditor

## 20210423

- 修改商品组件上传接口

## 20210422

- cookie 登陆态
- 本地 Proxy

## 20210421

- refactor NavigateEditor

## 20210420

**OPTIMIZE** extractCSS: true 导致页面样式闪烁，找到了原因。

> Lego 项目包含客户端和配置端的页面，因此需兼容PC和移动端样式。
> 为了满足移动端响应式需求，采用了 rem + postcss-pxtorem 的适配方案。
> 但经过改方案输出的 css 代码，不兼容PC端展示。因此，配置端在 html 标签上设置了font-size。
> 然而具体实现 font-size 设置的代码考虑不周，导致页面样式闪烁。

```javascript
// lego-nuxt/layouts/manageLayout.vue
export default {
  data(){},
  mounted(){
    this.setFrontSize()
  },
  methods:{
    setFrontSize() {
      let doc=document
      let win=window
      let docEl = document.documentElement,
        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
        recalc = function () {
          let clientWidth = docEl.clientWidth
          if (!clientWidth) return
          // docEl.style.fontSize = 50 * (clientWidth / 1200) + 'px'
          docEl.style.fontSize =  '40px'
        }

      if (!doc.addEventListener) return
      win.addEventListener(resizeEvt, recalc, false)
      doc.addEventListener('DOMContentLoaded', recalc, false)
    }
  }
}
```

解决办法

```javascript
// lego-nuxt/layouts/manageLayout.vue
export default {
  data(){},
  mounted(){
    this.setFrontSize()
  },
  methods:{
    setFrontSize() {
			let docEl = document.documentElement
			docEl.style.fontSize = '40px'
    }
  }
}
```

以上代码仅运行在配置端，可确保不影响移动端样式。但这不是最佳方案，后续可以展开讨论。

**REFENCE** 资料

https://github.com/amfe/lib-flexible
https://www.zhangxinxu.com/wordpress/2016/08/vw-viewport-responsive-layout-typography/
https://github.com/cuth/postcss-pxtorem

## 20210419

nuxt 构建性能优化：

1. CSS 抽取（extractCSS: true 导致页面样式闪烁）
2. JS 文件拆分和大小限制

> "nuxt": "^2.14.6"
>
> "webpack": "^4.46.0"

lego-nuxt 环境变量配置

## 20210416

补充相关逻辑和代码注释

![image-20210416154314371](/Users/yuqigong/Dropbox/Apps/Editorial/md/360.assets/image-20210416154314371.png)

>  WARN  build.extractCSS.allChunks has no effect from v2.0.0. Please use build.optimization.splitChunks settings instead.

优化前

![image-20210416162306936](/Users/yuqigong/Dropbox/Apps/Editorial/md/360.assets/image-20210416162306936.png)

![image-20210419142144680](/Users/yuqigong/Dropbox/Apps/Editorial/md/360.assets/image-20210419142144680.png)

![image-20210419141035481](/Users/yuqigong/Dropbox/Apps/Editorial/md/360.assets/image-20210419141035481.png)

![image-20210419141850199](/Users/yuqigong/Dropbox/Apps/Editorial/md/360.assets/image-20210419141850199.png)



## 20210415

ElevatorModule 和 NavigateModule 改造 SSR 完成。

代码重构方式：

1. 代码复用，提高代码利用率 - mixin
2. 封装复杂逻辑，提高代码阅读性 - extends
3. 基础和公共方法沉淀积累 - utils
4. 纯函数文件 - helper
5. 组件文件 - components

```markdown
// 超过500行的代码
// utils 超过300行或者某个函数超过100行，单独抽出一个文件
.
├── components                                        # 可选，组件
│   ├── Module1
│   │   ├── index.vue                                 # 必须，实现主要业务逻辑，组织代码引用关系
│   │   ├── module.extends.js                         # 可选，扩展函数
│   │   └── index.less                                # 可选，组件样式（css/less/scss）
│   ├── Module2
│   │   ├── index.vue
│   │   ├── module.extends.js
│   │   └── index.less
│   ├── components.mixin.js                           # 可选，组件内部代码复用
│   └── common.less                                   # 可选，组件内部公共样式
├── components.extends.js                             # 可选，扩展函数
├── tracks.js                                         # 必须，数据埋点
├── index.less                                        # 可选，组件样式（css/less/scss）
└── index.vue                                         # 必须，组件入口文件
```

## 20210414

ProductModule 改造 SSR 完成。

## 20210413

熟悉lego-nuxt项目：

- Lego 是一个可视化搭建平台，主要是活动营销页面发布；
- Lego 分为配置端和客户端，采用同构的方式开发，前后端代码一套；
- Lego 有两套代码：lego-fe 和 lego-nuxt，fe是纯客户端项目，nuxt支持服务端渲染；
- Lego 内嵌在 360 数科运营管理平台中，没有独立的入口；

SSR改造 ProductModule 

## 20210412

ElevatorModule，ProductModule，NavigateModule，满足**Lego**服务端渲染。

1. 如何编写一个 Lego 组件？
2. Lego 渲染逻辑？
3. Lego 部署方式？有哪些环境（test / prod）？
4. Lego 页面配置和发布流程？
5. Lego 依赖的接口和服务有哪些？

```markdown
# 组件服务端渲染

> 让客户端组件支持服务端渲染！

## SSR 官方说明

- 服务器上的数据响应

在纯客户端应用程序 (client-only app) 中，每个用户会在他们各自的浏览器中使用新的应用程序实例。对于服务器端渲染，我们也希望如此：每个请求应该都是全新的、独立的应用程序实例，以便不会有交叉请求造成的状态污染 (cross-request state pollution)。

因为实际的渲染过程需要确定性，所以我们也将在服务器上“预取”数据 ("pre-fetching" data) - 这意味着在我们开始渲染时，我们的应用程序就已经解析完成其状态。也就是说，将数据进行响应式的过程在服务器上是多余的，所以默认情况下禁用。禁用响应式数据，还可以避免将「数据」转换为「响应式对象」的性能开销。

- 组件生命周期钩子函数

由于没有动态更新，所有的生命周期钩子函数中，只有 beforeCreate 和 created 会在服务器端渲染 (SSR) 过程中被调用。这就是说任何其他生命周期钩子函数中的代码（例如 beforeMount 或 mounted），只会在客户端执行。

此外还需要注意的是，你应该避免在 beforeCreate 和 created 生命周期时产生全局副作用的代码，例如在其中使用 setInterval 设置 timer。在纯客户端 (client-side only) 的代码中，我们可以设置一个 timer，然后在 beforeDestroy 或 destroyed 生命周期时将其销毁。但是，由于在 SSR 期间并不会调用销毁钩子函数，所以 timer 将永远保留下来。为了避免这种情况，请将副作用代码移动到 beforeMount 或 mounted 生命周期中。

## 访问特定平台(Platform-Specific) API

通用代码不可接受特定平台的 API，因此如果你的代码中，直接使用了像 window 或 document，这种仅浏览器可用的全局变量，则会在 Node.js 中执行时抛出错误，反之也是如此。

对于共享于服务器和客户端，但用于不同平台 API 的任务(task)，建议将平台特定实现包含在通用 API 中，或者使用为你执行此操作的 library。例如，axios 是一个 HTTP 客户端，可以向服务器和客户端都暴露相同的 API。

对于仅浏览器可用的 API，通常方式是，在「纯客户端 (client-only)」的生命周期钩子函数中惰性访问 (lazily access) 它们。

请注意，考虑到如果第三方 library 不是以上面的通用用法编写，则将其集成到服务器渲染的应用程序中，可能会很棘手。你可能要通过模拟 (mock) 一些全局变量来使其正常运行，但这只是 hack 的做法，并且可能会干扰到其他 library 的环境检测代码。

## 自定义指令

大多数自定义指令直接操作 DOM，因此会在服务器端渲染 (SSR) 过程中导致错误。有两种方法可以解决这个问题：

1. 推荐使用组件作为抽象机制，并运行在「虚拟 DOM 层级(Virtual-DOM level)」（例如，使用渲染函数(render function)）。
2. 如果你有一个自定义指令，但是不是很容易替换为组件，则可以在创建服务器 renderer 时，使用 directives 选项所提供"服务器端版本(server-side version)"。


## 解决方案

- 检查生命周期钩子函数（beforeCreate，created）
- 模拟window对象，jsdom
- 移除自定义指令，改为组件和渲染函数，或者使用 directives 选项
- 异步数据的组件添加 asyncData 方法

## 参考

https://zhuanlan.zhihu.com/p/137319440

```

VSCode-Settings：

```json
{
    "workbench.iconTheme": "vscode-icons",
    // "javascript.format.enable": false,
    // "standard.enable": true,
    // "standard.autoFixOnSave": true,
    // "standard.validate": [
    //     "javascript",
    //     "javascriptreact"
    // ],
    "editor.formatOnSave": true,
    "vetur.validation.template": false,
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    }
}
```

ESLint

```
https://www.jianshu.com/p/39e8aad781ed
https://juejin.cn/post/6844903961804161031
https://medium.com/@jeryldev/a-beginners-story-how-to-setup-eslint-in-a-visual-studio-code-project-28b379a33cdb
https://tech.meituan.com/2019/08/01/eslint-application-practice-in-medium-and-large-teams.html
https://cn.eslint.org/docs/developer-guide/shareable-configs
https://juejin.cn/post/6859291468138774535
https://zhuanlan.zhihu.com/p/210446846
https://segmentfault.com/a/1190000039814304
```

ramdajs - 一款实用的 JavaScript 函数式编程库。

## 20210411

推推可以使用

gitlab权限开通

## 20210409

vpn/邮箱/OA/confluence 权限开通，04/09

## 20210408

360数科第一天入职

