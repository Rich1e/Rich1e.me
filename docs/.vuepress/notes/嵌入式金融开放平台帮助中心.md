# 嵌入式金融开放平台-帮助中心开发设计

[toc]

## 产品原型

[https://jne0v7.axshare.com](https://jne0v7.axshare.com/)

## 开发设计

### 页面与组件

| 运行环境 | 功能模块     | 页面                                                         | 组件                                 | 接口                                                         |
| -------- | ------------ | ------------------------------------------------------------ | ------------------------------------ | ------------------------------------------------------------ |
|          | 帮助中心前台 | 帮助中心搜索页                                               | 搜索框                               | 搜索接口<br />文档类别接口                                   |
|          |              | 帮助中心搜索列表页                                           | 分页组件<br />建议搜索<br />分类标签 | 搜索接口                                                     |
|          |              | 帮助中心搜索详情页                                           | 关键词标签<br />浏览量<br />访问路径 | 文档详情接口                                                 |
|          | 帮助文档后台 | 帮助文档列表页                                               | 查询组件                             | 搜索接口<br />文档删除接口                                   |
|          |              | 帮助文档新建文档页                                           | 富文本<br />标签<br />分类           | 文档详情接口查询接口<br />文档详情保存接口<br />文档详情更新接口<br />文档类别接口<br />图片上传接口 |
|          | 全局         | 异常页面<br />404 页面<br />权限模块<br />路由模块<br />登陆模块 |                                      |                                                              |

### 富文本

> TinyMCE - 一款易用、且功能强大的所见即所得的富文本编辑器。
>
> https://www.tiny.cloud/

![image-20211026141635534](C:\Users\gongyuqi-jk\AppData\Roaming\Typora\typora-user-images\image-20211026141635534.png)

### 接口

#### 帮助文档-搜索接口

> 帮助中心搜索页的搜索框和帮助文档列表页的查询按钮使用同一个接口。

API Path

`/help/doc/search`

| 接口说明 | 类型定义                          | 描述               |
| -------- | --------------------------------- | ------------------ |
| 接口类型 | Get                               | 接口请求方式       |
| 数据格式 | application/x-www-form-urlencoded | 接口数据交互格式   |
| 鉴权方式 | token                             | 接口安全性校验方式 |

Request

| 字段  | 类型   | 是否必填 | 长度     | 描述     |
| ----- | ------ | -------- | -------- | -------- |
| title | 字符串 | 否 | 50个字符 | 文档标题 |
| words | 字符串 | 否      | 50个字符 | 关键词   |
| category | 数值   |   是   | 1-10     | 分类类型<br />1-还款<br />2-借贷<br />3-鉴权 |
| currentPage | 数值 | 是 | 1-10 | 当前页码 |
| pageSize | 数值 | 是 | 1-50 | 每页条数 |

Response

| 字段      | 类型   | 长度 | 描述             |
| --------- | ------ | ---- | ---------------- |
| status    | 数值   |      | 状态码           |
| message   | 字符串 |      | 状态信息         |
| data      | 对象   |      | 数据             |
| list      | 数组   |      | 搜索列表         |
| docId     | 字符串 |      | 文档ID           |
| title     | 字符串 |      | 文档标题         |
| category  | 字符串 |      | 文档类别         |
| words     | 数组   |      | 关键词           |
| summary   | 字符串 |      | 摘要             |
| lastTime  | 字符串 |      | 文档最后修改时间 |
| totalSize | 数值   |      | 总条数           |

Example

```javascript
// Request
{
  "title": "文档标题",
  "words": "关键词",
  "category": 1,
  "currentPage": 1,
  "pageSize": 5
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {
    "list": [{
      "docId": "",
      "title": "",
      "category": [],
      "words": [],
      "summary": "",
      "lastTime": ""
    }, {}, {}],
    "total": 50
  }
}
```

#### 帮助文档-类别接口

API Path

`/help/doc/category/list`

| 接口说明 | 类型定义         | 描述               |
| -------- | ---------------- | ------------------ |
| 接口类型 | Post             | 接口请求方式       |
| 数据格式 | application/json | 接口数据交互格式   |
| 鉴权方式 | token            | 接口安全性校验方式 |

Request

| 字段 | 类型 | 是否必填 | 长度 | 描述         |
| ---- | ---- | -------- | ---- | ------------ |
| -    | -    | 否       | -    | 没有请求参数 |

Response

| 字段    | 类型   | 长度 | 描述         |
| ------- | ------ | ---- | ------------ |
| status  | 数值   |      | 状态码       |
| message | 字符串 |      | 状态信息     |
| data    | 对象   |      | 数据         |
| list    | 数组   |      | 文档类别     |
| code    | 字符串 |      | 文档类别编码 |
| desc    | 字符串 |      | 文档类别描述 |

Example

```javascript
// Request
{
  "docId": "文档ID字符串"
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {
    "list": [{
      "code": "文档类别编码",
      "desc": "文档类别描述"
    }]
  }
}
```

#### 帮助文档-详情页接口

API Path

`/help/doc/detail`

| 接口说明 | 类型定义 | 描述               |
| -------- | -------- | ------------------ |
| 接口类型 | Post      | 接口请求方式       |
| 数据格式 | application/json | 接口数据交互格式   |
| 鉴权方式 | token    | 接口安全性校验方式 |

Request

| 字段  | 类型   | 是否必填 | 长度 | 描述   |
| ----- | ------ | -------- | ---- | ------ |
| docId | 字符串 | 是       | 1-20 | 文档ID |

Response

| 字段     | 类型   | 长度 | 描述         |
| -------- | ------ | ---- | ------------ |
| status   | 数值   |      | 状态码       |
| message  | 字符串 |      | 状态信息     |
| data     | 对象   |      | 数据         |
| title    | 字符串 |      | 文档标题     |
| category | 字符串 |      | 文档类别     |
| words    | 数组   |      | 关键词       |
| content  | 字符串 |      | 文档内容     |
| lastTime | 字符串 |      | 最后编辑时间 |
| author   | 字符串 |      | 作者         |
| views    | 数值   |      | 浏览量       |

Example

```javascript
// Request
{
  "docId": "文档ID字符串"
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {
    "title": "标题",
    "category": ["类型"],
    "words": ["关键词"],
    "content": "文档内容",
    "lastTime": "最后修改时间",
    "author": "作者",
    "views": 100
  }
}
```

#### 帮助文档-查询接口

API Path

`/help/doc/query`

| 接口说明 | 类型定义 | 描述               |
| -------- | -------- | ------------------ |
| 接口类型 | Post      | 接口请求方式       |
| 数据格式 | application/json | 接口数据交互格式   |
| 鉴权方式 | token    | 接口安全性校验方式 |

Request

| 字段  | 类型   | 是否必填 | 长度 | 描述   |
| ----- | ------ | -------- | ---- | ------ |
| docId | 字符串 | 是       | 1-20 | 文档ID |

Response

| 字段     | 类型   | 长度 | 描述     |
| -------- | ------ | ---- | -------- |
| status   | 数值   |      | 状态码   |
| message  | 字符串 |      | 状态信息 |
| data     | 对象   |      | 数据     |
| title    | 字符串 |      | 文档标题 |
| summary  | 字符串 |      | 摘要     |
| category | 字符串 |      | 文档类别 |
| words    | 数组   |      | 关键词   |
| content  | 字符串 |      | 文档内容 |

Example

```javascript
// Request
{
  "docId": "文档ID字符串"
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {
    "title": "标题",
    "summary": "摘要",
    "category": ["类型"],
    "words": ["关键词"],
    "content": "文档内容"
  }
}
```

#### 帮助文档-新建接口

API Path

`/help/doc/create`

| 接口说明 | 类型定义         | 描述               |
| -------- | ---------------- | ------------------ |
| 接口类型 | Post             | 接口请求方式       |
| 数据格式 | application/json | 接口数据交互格式   |
| 鉴权方式 | token            | 接口安全性校验方式 |

Request

| 字段     | 类型   | 长度 | 描述     |
| -------- | ------ | ---- | -------- |
| title    | 字符串 |      | 文档标题 |
| summary  | 字符串 |      | 摘要     |
| content  | 字符串 |      | 文档内容 |
| words    | 数组   |      | 关键词   |
| category | 数组   |      | 文档类别 |

Response

| 字段    | 类型   | 长度 | 描述     |
| ------- | ------ | ---- | -------- |
| status  | 数值   |      | 状态码   |
| message | 字符串 |      | 状态信息 |
| data    | 对象   |      | 数据     |

Example

```javascript
// Request
{
  "title": "文档标题",
  "summary": "摘要",
  "content": "文档内容",
  "words": ["关键词"],
  "category": ["文档类型"]
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {}
}
```

#### 帮助文档-更新接口

API Path

`/help/doc/update`

| 接口说明 | 类型定义         | 描述               |
| -------- | ---------------- | ------------------ |
| 接口类型 | Post             | 接口请求方式       |
| 数据格式 | application/json | 接口数据交互格式   |
| 鉴权方式 | token            | 接口安全性校验方式 |

Request

| 字段     | 类型   | 长度 | 描述     |
| -------- | ------ | ---- | -------- |
| docId    | 字符串 |      | 文档ID   |
| title    | 字符串 |      | 文档标题 |
| summary  | 字符串 |      | 摘要     |
| content  | 字符串 |      | 文档内容 |
| words    | 数组   |      | 关键词   |
| category | 字符串 |      | 文档类别 |

Response

| 字段    | 类型   | 长度 | 描述     |
| ------- | ------ | ---- | -------- |
| status  | 数值   |      | 状态码   |
| message | 字符串 |      | 状态信息 |
| data    | 对象   |      | 数据     |

Example

```javascript
// Request
{
  "docId": "文档ID",
  "title": "文档标题",
  "summary": "摘要",
  "content": "文档内容",
  "words": ["关键词"],
  "category": ["文档类型"]
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {}
}
```

#### 帮助文档-删除接口

API Path

`/help/doc/delete`

| 接口说明 | 类型定义         | 描述               |
| -------- | ---------------- | ------------------ |
| 接口类型 | Post             | 接口请求方式       |
| 数据格式 | application/json | 接口数据交互格式   |
| 鉴权方式 | token            | 接口安全性校验方式 |

Request

| 字段   | 类型 | 长度 | 描述   |
| ------ | ---- | ---- | ------ |
| docIds | 数组 |      | 文档ID |

Response

| 字段    | 类型   | 长度 | 描述     |
| ------- | ------ | ---- | -------- |
| status  | 数值   |      | 状态码   |
| message | 字符串 |      | 状态信息 |
| data    | 对象   |      | 数据     |

Example

```javascript
// Request
{
  "docIds": ["文档ID"]
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {}
}
```

#### 帮助文档-图片上传接口

API Path

`/pic/upload`

| 接口说明 | 类型定义            | 描述               |
| -------- | ------------------- | ------------------ |
| 接口类型 | Post                | 接口请求方式       |
| 数据格式 | multipart/form-data | 接口数据交互格式   |
| 鉴权方式 | token               | 接口安全性校验方式 |

Request

| 字段 | 类型      | 长度 | 描述     |
| ---- | --------- | ---- | -------- |
| file | Form Data |      | 上传文件 |

Response

| 字段    | 类型   | 长度 | 描述                                                         |
| ------- | ------ | ---- | ------------------------------------------------------------ |
| status  | 数值   |      | 状态码                                                       |
| message | 字符串 |      | 状态信息                                                     |
| data    | 对象   |      | 数据                                                         |
| imgUrl  | 字符串 |      | 图片地址<br />参考：`http://localhost:3300/uploads/file-17cba7d6b6d.jpg` |

Example

```javascript
// Request
{
  "file": "图片文件"
}

// Response
{
  "status": 200,
  "message": "OK",
  "data": {
    "imgUrl": "图片地址"
  }
}
```

#### 错误码

后端提供

## 模块划分

![img](http://jira.daikuan.corp.qihoo.net:8090/plugins/servlet/status-macro/placeholder?title=%E5%BC%80%E5%8F%91%E4%B8%AD&colour=Yellow)![img](http://jira.daikuan.corp.qihoo.net:8090/plugins/servlet/status-macro/placeholder?=&0=&colour=Blue&title=%E8%81%94%E8%B0%83%E4%B8%AD)![img](http://jira.daikuan.corp.qihoo.net:8090/plugins/servlet/status-macro/placeholder?=&0=&colour=Grey&title=%E6%B5%8B%E8%AF%95%E4%B8%AD)![img](http://jira.daikuan.corp.qihoo.net:8090/plugins/servlet/status-macro/placeholder?=&0=&colour=Green&title=%E6%B5%8B%E8%AF%95%E5%AE%8C%E6%88%90)

| 模块               | 任务           | 页面 | 组件 | 开发人日 | 负责人 | 页面进度 | 接口联调 | 状态                                     | 功能描述 |
| :----------------- | :------------- | :--- | :--- | :------- | :----- | :------- | :------- | :--------------------------------------- | :------- |
| 帮助中心前台       | 帮助中心页     | 1    |      | -        | 侯枫   | -        | 是       |                                          |          |
| 帮助中心搜索列表页 | 1              |      | -    | 侯枫     | -      | 是       |          |                                          |          |
| 帮助中心文档详情页 | 1              |      | -    | 侯枫     | -      | 是       |          |                                          |          |
| 搜索组件           |                | 1    | -    | 侯枫     | -      | 是       |          |                                          |          |
| 帮助文档后台       | 帮助文档列表页 | 1    |      | 3        | 龚毓麒 | -        | 是       |                                          |          |
| 帮助文档新建文档页 | 1              |      | 2    | 龚毓麒   | -      | 是       |          |                                          |          |
| 富文本组件         |                | 1    | 2    | 龚毓麒   | -      | 是       |          |                                          |          |
| 异常模块           |                | 1    | 1    | 龚毓麒   | -      | 是       |          | 接口请求、网络延迟等异常处理             |          |
| 数据请求模块       |                | 1    | 1    | 龚毓麒   | -      | 是       |          | 图片接口数据格式为 multipart/form-data   |          |
| 权限模块           |                | 1    | 1    | 龚毓麒   | -      | 是       |          | 帮助文档后台只有管理员权限的角色才能访问 |          |